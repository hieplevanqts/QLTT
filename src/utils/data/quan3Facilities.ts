/**
 * Dữ liệu thực về các cơ sở ATTP tại Phường 3, Hà Nội
 * Sử dụng cho báo cáo RPT-2025-002: "Báo cáo kiểm tra vệ sinh ATTP - Phường 3"
 */

export interface Quan3Facility {
  id: string;
  name: string;
  type: string;
  address: string;
  ward?: string;
  district: string;
  riskLevel: 'high' | 'medium' | 'low';
  legalStatus?: string;
  status: 'active' | 'inactive';
  violations?: number;
  lastInspection?: string;
  hygieneScore?: number; // Điểm vệ sinh ATTP (0-100)
  certificateStatus?: string; // Trạng thái chứng nhận
}

export const quan3FacilitiesData: Quan3Facility[] = [
  // NHÓM 1: NHÀ HÀNG - 7 cơ sở
  {
    id: 'Q3-NR-001',
    name: 'Nhà hàng Sài Gòn Xưa',
    type: 'Nhà hàng',
    address: '234 Võ Văn Tần, Phường 5',
    ward: 'Phường 5',
    district: 'Phường 3',
    riskLevel: 'high',
    legalStatus: 'Thiếu giấy phép ATTP',
    status: 'active',
    violations: 4,
    lastInspection: '10/01/2025',
    hygieneScore: 62,
    certificateStatus: 'Hết hạn',
  },
  {
    id: 'Q3-NR-002',
    name: 'Nhà hàng Món Huế',
    type: 'Nhà hàng',
    address: '156 Nam Kỳ Khởi Nghĩa, Phường 7',
    ward: 'Phường 7',
    district: 'Phường 3',
    riskLevel: 'medium',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 2,
    lastInspection: '11/01/2025',
    hygieneScore: 78,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-NR-003',
    name: 'Nhà hàng Lẩu Dê Bảy Tỵ',
    type: 'Nhà hàng',
    address: '89 Cao Thắng, Phường 4',
    ward: 'Phường 4',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '12/01/2025',
    hygieneScore: 92,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-NR-004',
    name: 'Nhà hàng Nhật Bản Sakura',
    type: 'Nhà hàng',
    address: '67 Điện Biên Phủ, Phường Đa Kao',
    ward: 'Phường Đa Kao',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '13/01/2025',
    hygieneScore: 95,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-NR-005',
    name: 'Nhà hàng Hải Sản Biển Đông',
    type: 'Nhà hàng',
    address: '123 Ba Tháng Hai, Phường 12',
    ward: 'Phường 12',
    district: 'Phường 3',
    riskLevel: 'high',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 3,
    lastInspection: '09/01/2025',
    hygieneScore: 65,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-NR-006',
    name: 'Nhà hàng Chay Tịnh Tâm',
    type: 'Nhà hàng',
    address: '45 Trần Quốc Toản, Phường 8',
    ward: 'Phường 8',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '14/01/2025',
    hygieneScore: 88,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-NR-007',
    name: 'Nhà hàng Buffet 99',
    type: 'Nhà hàng',
    address: '201 Nguyễn Đình Chiểu, Phường 6',
    ward: 'Phường 6',
    district: 'Phường 3',
    riskLevel: 'medium',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 2,
    lastInspection: '10/01/2025',
    hygieneScore: 75,
    certificateStatus: 'Còn hạn',
  },

  // NHÓM 2: QUÁN ĂN - 6 cơ sở
  {
    id: 'Q3-QA-001',
    name: 'Quán Cơm Tấm Sườn Bì Chả',
    type: 'Quán ăn',
    address: '78 Lý Chính Thắng, Phường 9',
    ward: 'Phường 9',
    district: 'Phường 3',
    riskLevel: 'medium',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 1,
    lastInspection: '11/01/2025',
    hygieneScore: 72,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-QA-002',
    name: 'Quán Phở Bò Viên',
    type: 'Quán ăn',
    address: '34 Võ Thị Sáu, Phường Võ Thị Sáu',
    ward: 'Phường Võ Thị Sáu',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '12/01/2025',
    hygieneScore: 85,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-QA-003',
    name: 'Quán Bún Bò Huế Đông Ba',
    type: 'Quán ăn',
    address: '56 Trường Sa, Phường 13',
    ward: 'Phường 13',
    district: 'Phường 3',
    riskLevel: 'high',
    legalStatus: 'Thiếu giấy phép ATTP',
    status: 'active',
    violations: 3,
    lastInspection: '09/01/2025',
    hygieneScore: 58,
    certificateStatus: 'Chưa có',
  },
  {
    id: 'Q3-QA-004',
    name: 'Quán Bánh Xèo Miền Tây',
    type: 'Quán ăn',
    address: '90 Cách Mạng Tháng Tám, Phường 11',
    ward: 'Phường 11',
    district: 'Phường 3',
    riskLevel: 'medium',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 2,
    lastInspection: '10/01/2025',
    hygieneScore: 70,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-QA-005',
    name: 'Quán Mì Quảng Đà Nẵng',
    type: 'Quán ăn',
    address: '112 Hai Bà Trưng, Phường Bến Thành',
    ward: 'Phường Bến Thành',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '13/01/2025',
    hygieneScore: 82,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-QA-006',
    name: 'Quán Bánh Canh Cua',
    type: 'Quán ăn',
    address: '145 Nguyễn Thị Minh Khai, Phường 5',
    ward: 'Phường 5',
    district: 'Phường 3',
    riskLevel: 'medium',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 1,
    lastInspection: '11/01/2025',
    hygieneScore: 76,
    certificateStatus: 'Còn hạn',
  },

  // NHÓM 3: QUÁN CÀ PHÊ - 5 cơ sở
  {
    id: 'Q3-CF-001',
    name: 'The Coffee House',
    type: 'Quán cà phê',
    address: '178 Điện Biên Phủ, Phường 15',
    ward: 'Phường 15',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '14/01/2025',
    hygieneScore: 93,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-CF-002',
    name: 'Phúc Long Coffee & Tea',
    type: 'Quán cà phê',
    address: '234 Nam Kỳ Khởi Nghĩa, Phường 8',
    ward: 'Phường 8',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '13/01/2025',
    hygieneScore: 90,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-CF-003',
    name: 'Cộng Cà Phê',
    type: 'Quán cà phê',
    address: '67 Lê Văn Sỹ, Phường 14',
    ward: 'Phường 14',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '12/01/2025',
    hygieneScore: 87,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-CF-004',
    name: 'Café Apartment',
    type: 'Quán cà phê',
    address: '89 Nguyễn Văn Trỗi, Phường 10',
    ward: 'Phường 10',
    district: 'Phường 3',
    riskLevel: 'medium',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 1,
    lastInspection: '11/01/2025',
    hygieneScore: 74,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-CF-005',
    name: 'Cà Phê Vợt',
    type: 'Quán cà phê',
    address: '23 Pasteur, Phường 6',
    ward: 'Phường 6',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '14/01/2025',
    hygieneScore: 86,
    certificateStatus: 'Còn hạn',
  },

  // NHÓM 4: SIÊU THỊ - 3 cơ sở
  {
    id: 'Q3-ST-001',
    name: 'Siêu thị Coopmart Cách Mạng Tháng Tám',
    type: 'Siêu thị',
    address: '168 Cách Mạng Tháng Tám, Phường 11',
    ward: 'Phường 11',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '15/01/2025',
    hygieneScore: 96,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-ST-002',
    name: 'VinMart Điện Biên Phủ',
    type: 'Siêu thị',
    address: '456 Điện Biên Phủ, Phường 25',
    ward: 'Phường 25',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '15/01/2025',
    hygieneScore: 94,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-ST-003',
    name: 'Circle K Nam Kỳ Khởi Nghĩa',
    type: 'Siêu thị',
    address: '89 Nam Kỳ Khởi Nghĩa, Phường 7',
    ward: 'Phường 7',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '14/01/2025',
    hygieneScore: 91,
    certificateStatus: 'Còn hạn',
  },

  // NHÓM 5: CỬA HÀNG - 4 cơ sở
  {
    id: 'Q3-CH-001',
    name: 'Cửa hàng bánh mì Như Lan',
    type: 'Cửa hàng',
    address: '50 Cao Thắng, Phường 3',
    ward: 'Phường 3',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '13/01/2025',
    hygieneScore: 84,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-CH-002',
    name: 'Cửa hàng thực phẩm sạch Organica',
    type: 'Cửa hàng',
    address: '234 Võ Văn Tần, Phường 5',
    ward: 'Phường 5',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '12/01/2025',
    hygieneScore: 89,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-CH-003',
    name: 'Cửa hàng rau củ quả tươi',
    type: 'Cửa hàng',
    address: '78 Lý Chính Thắng, Phường 9',
    ward: 'Phường 9',
    district: 'Phường 3',
    riskLevel: 'medium',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 1,
    lastInspection: '11/01/2025',
    hygieneScore: 73,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-CH-004',
    name: 'Cửa hàng tiện lợi GS25',
    type: 'Cửa hàng',
    address: '123 Trường Sa, Phường 2',
    ward: 'Phường 2',
    district: 'Phường 3',
    riskLevel: 'low',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 0,
    lastInspection: '14/01/2025',
    hygieneScore: 88,
    certificateStatus: 'Còn hạn',
  },

  // NHÓM 6: CƠ SỞ CHẾ BIẾN - 3 cơ sở
  {
    id: 'Q3-CB-001',
    name: 'Xưởng chế biến thực phẩm Quang Minh',
    type: 'Cơ sở chế biến',
    address: '456 Ba Tháng Hai, Phường 12',
    ward: 'Phường 12',
    district: 'Phường 3',
    riskLevel: 'high',
    legalStatus: 'Thiếu giấy phép ATTP',
    status: 'active',
    violations: 5,
    lastInspection: '08/01/2025',
    hygieneScore: 55,
    certificateStatus: 'Hết hạn',
  },
  {
    id: 'Q3-CB-002',
    name: 'Cơ sở sản xuất bánh kẹo Hồng Hà',
    type: 'Cơ sở chế biến',
    address: '89 Nguyễn Thị Minh Khai, Phường 5',
    ward: 'Phường 5',
    district: 'Phường 3',
    riskLevel: 'medium',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 2,
    lastInspection: '10/01/2025',
    hygieneScore: 71,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-CB-003',
    name: 'Xưởng làm nước giải khát Thiên Nhiên',
    type: 'Cơ sở chế biến',
    address: '234 Cách Mạng Tháng Tám, Phường 10',
    ward: 'Phường 10',
    district: 'Phường 3',
    riskLevel: 'high',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 4,
    lastInspection: '09/01/2025',
    hygieneScore: 60,
    certificateStatus: 'Còn hạn',
  },

  // NHÓM 7: QUÁN NHẬU - 2 cơ sở
  {
    id: 'Q3-QN-001',
    name: 'Quán nhậu Bốn Mùa',
    type: 'Quán nhậu',
    address: '67 Võ Thị Sáu, Phường Võ Thị Sáu',
    ward: 'Phường Võ Thị Sáu',
    district: 'Phường 3',
    riskLevel: 'high',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 3,
    lastInspection: '09/01/2025',
    hygieneScore: 63,
    certificateStatus: 'Còn hạn',
  },
  {
    id: 'Q3-QN-002',
    name: 'Quán ốc Hải Sản Tươi Sống',
    type: 'Quán nhậu',
    address: '145 Điện Biên Phủ, Phường Đa Kao',
    ward: 'Phường Đa Kao',
    district: 'Phường 3',
    riskLevel: 'medium',
    legalStatus: 'Đầy đủ',
    status: 'active',
    violations: 2,
    lastInspection: '10/01/2025',
    hygieneScore: 69,
    certificateStatus: 'Còn hạn',
  },
];

// Export helper functions
export const getQuan3FacilityStats = () => {
  const total = quan3FacilitiesData.length;
  const highRisk = quan3FacilitiesData.filter(f => f.riskLevel === 'high').length;
  const mediumRisk = quan3FacilitiesData.filter(f => f.riskLevel === 'medium').length;
  const lowRisk = quan3FacilitiesData.filter(f => f.riskLevel === 'low').length;
  const totalViolations = quan3FacilitiesData.reduce((sum, f) => sum + (f.violations || 0), 0);
  const avgHygieneScore = Math.round(
    quan3FacilitiesData.reduce((sum, f) => sum + (f.hygieneScore || 0), 0) / total
  );

  return {
    total,
    highRisk,
    mediumRisk,
    lowRisk,
    totalViolations,
    avgHygieneScore,
    riskRate: ((highRisk / total) * 100).toFixed(1),
  };
};

export const getQuan3FacilitiesByType = () => {
  const typeGroups: Record<string, { total: number; highRisk: number; violations: number }> = {};
  
  quan3FacilitiesData.forEach(f => {
    if (!typeGroups[f.type]) {
      typeGroups[f.type] = { total: 0, highRisk: 0, violations: 0 };
    }
    typeGroups[f.type].total++;
    if (f.riskLevel === 'high') typeGroups[f.type].highRisk++;
    if (f.violations && f.violations > 0) typeGroups[f.type].violations += f.violations;
  });

  return Object.entries(typeGroups).map(([type, stats]) => ({
    type,
    ...stats,
  }));
};
